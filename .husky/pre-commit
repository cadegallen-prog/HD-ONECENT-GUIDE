echo "Running pre-commit checks..."

# Auto-format staged files with Prettier
echo "ğŸ“ Formatting staged files..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Formatting failed. Please fix errors and try again."
  exit 1
fi

# Security scan (block PII)
npm run security:scan
if [ $? -ne 0 ]; then
  echo "âŒ Security scan failed. Commit blocked."
  exit 1
fi

# Color lint (block raw Tailwind colors)
npm run lint:colors
if [ $? -ne 0 ]; then
  echo "âŒ Color lint failed. Use CSS variables, not raw Tailwind colors."
  exit 1
fi

echo "âœ… Pre-commit checks passed."
