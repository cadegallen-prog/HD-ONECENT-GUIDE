<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HD State URL Collector Launcher</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #EA5B0C;
        }
        .status {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #EA5B0C;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #d54e00;
        }
        #status {
            margin-top: 20px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>HD State URL Collector</h1>

    <div class="status">
        <h2>Instructions:</h2>
        <ol>
            <li>Make sure the URL Collector Tampermonkey script is installed</li>
            <li>Click "Launch All 50 States"</li>
            <li>Wait for tabs to open, scrape, and close</li>
            <li>Click "Download URLs" when done</li>
        </ol>
    </div>

    <div class="status">
        <button onclick="launchAll()">Launch All 50 States</button>
        <button onclick="downloadURLs()">Download URLs</button>
        <button onclick="clearData()">Clear Data</button>
        <div id="status"></div>
    </div>

    <script>
        const states = [
            'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA',
            'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD',
            'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ',
            'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC',
            'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'
        ];

        function launchAll() {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = '<p>Opening all 50 states...</p>';

            states.forEach((state, index) => {
                setTimeout(() => {
                    window.open('https://www.homedepot.com/l/' + state, '_blank');
                    statusDiv.innerHTML += '<p>✓ Opened ' + state + '</p>';
                }, index * 500);
            });

            setTimeout(() => {
                statusDiv.innerHTML += '<p style="color: green; font-weight: bold;">✅ All states opened!</p>';
            }, states.length * 500 + 1000);
        }

        function downloadURLs() {
            const data = localStorage.getItem('homeDepotStoreURLs');
            if (!data) {
                alert('No URLs found! Run the launcher first.');
                return;
            }

            const urls = JSON.parse(data);
            const date = new Date().toISOString().split('T')[0];
            const filename = 'all_store_urls_' + date + '.json';

            const blob = new Blob([JSON.stringify(urls, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);

            alert('✅ Downloaded ' + urls.length + ' store URLs!');
        }

        function clearData() {
            if (confirm('Clear all collected URLs?')) {
                localStorage.removeItem('homeDepotStoreURLs');
                document.getElementById('status').innerHTML = '<p style="color: green;">✅ Data cleared!</p>';
            }
        }

        window.addEventListener('load', function() {
            const data = localStorage.getItem('homeDepotStoreURLs');
            if (data) {
                const count = JSON.parse(data).length;
                document.getElementById('status').innerHTML = '<p>Current total: <strong>' + count + ' URLs</strong></p>';
            }
        });
    </script>
</body>
</html>
