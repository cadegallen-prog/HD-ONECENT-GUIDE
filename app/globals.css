@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ===============================================
       PENNY CENTRAL – MINIMALIST DESIGN SYSTEM
       Linear/Vercel/Stripe aesthetic
       =============================================== */

    /* Backgrounds - Light */
    --bg-page: #FAFAFA;
    --bg-card: #FFFFFF;
    --bg-elevated: #F4F4F5;

    /* Backgrounds - Dark */
    --bg-page-dark: #0F172A;
    --bg-card-dark: #1E293B;
    --bg-elevated-dark: #27272A;

    /* Text - Light */
    --text-primary: #0F172A;
    --text-secondary: #334155;
    --text-muted: #64748B;

    /* Text - Dark */
    --text-primary-dark: #FAFAFA;
    --text-secondary-dark: #94A3B8;
    --text-muted-dark: #64748B;

    /* Borders */
    --border-light: #E2E8F0;
    --border-dark: #334155;

    /* Accent — INDIGO — USE SPARINGLY */
    --accent: #6366F1;
    --accent-hover: #4F46E5;
    --accent-muted: #E0E7FF;
    --shadow-card: 0 1px 3px rgba(0,0,0,0.08);

    /* Status only - never decorative */
    --success: #16a34a;
    --error: #dc2626;
    --warning: #ca8a04;

    /* Compatibility with shadcn/ui components */
    --background: var(--bg-page);
    --foreground: var(--text-primary);
    --card: var(--bg-card);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-card);
    --popover-foreground: var(--text-primary);
    --primary: var(--accent);
    --primary-foreground: #ffffff;
    --secondary: var(--bg-elevated);
    --secondary-foreground: var(--text-primary);
    --muted: var(--bg-elevated);
    --muted-foreground: var(--text-muted);
    --accent-foreground: #ffffff;
    --destructive: var(--error);
    --destructive-foreground: #ffffff;
    --border: var(--border-light);
    --input: var(--border-light);
    --ring: var(--accent);
    --radius: 0.5rem;
  }

  .dark {
    --bg-page: var(--bg-page-dark);
    --bg-card: var(--bg-card-dark);
    --bg-elevated: var(--bg-elevated-dark);
    --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark);
    --text-muted: var(--text-muted-dark);
    --border: var(--border-dark);
    --accent: #818CF8;
    --accent-hover: #6366F1;
    --accent-muted: rgba(79,70,229,0.2);
    --shadow-card: inset 0 1px 0 rgba(99,102,241,0.1);

    /* Compatibility with shadcn/ui components */
    --background: var(--bg-page-dark);
    --foreground: var(--text-primary-dark);
    --card: var(--bg-card-dark);
    --card-foreground: var(--text-primary-dark);
    --popover: var(--bg-card-dark);
    --popover-foreground: var(--text-primary-dark);
    --secondary: var(--bg-elevated-dark);
    --secondary-foreground: var(--text-primary-dark);
    --muted: var(--bg-elevated-dark);
    --muted-foreground: var(--text-muted-dark);
    --border: var(--border-dark);
    --input: var(--border-dark);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    font-size: 15px;
    line-height: 1.5;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
  }

  /* Typography - Use Tailwind utilities instead of global styles */
  /* Page titles: text-[22px] font-semibold text-text-primary */
  /* Section headings: text-base font-semibold text-text-primary */
  /* Card titles: text-sm font-semibold text-text-primary */
  /* Body text: text-sm text-text-primary */

  code, .sku, .code {
    font-family: ui-monospace, monospace;
    font-size: 14px;
  }

  .caption, figcaption {
    font-size: 12px;
    color: var(--text-muted);
  }
}

@layer components {
  /* ===============================================
     GUIDE ARTICLE STYLES
     =============================================== */
  .guide-article {
    @apply text-slate-700 dark:text-slate-300;
  }

  .guide-article p {
    @apply mb-4 leading-relaxed;
  }

  .guide-article ul {
    @apply mb-6 ml-6 space-y-2 list-disc;
  }

  .guide-article li {
    @apply leading-relaxed;
  }

  .guide-article strong {
    @apply text-slate-900 dark:text-white font-semibold;
  }

  /* Section Headings */
  .section-heading {
    @apply text-xl font-semibold text-slate-900 dark:text-white mb-6 pb-3 border-b border-slate-200 dark:border-slate-700;
  }

  .lead {
    @apply text-lg text-slate-600 dark:text-slate-400 mb-6;
  }

  /* ===============================================
     CALLOUT BOXES
     =============================================== */
  .callout {
    @apply rounded-xl p-5 mb-6 border;
  }

  .callout-sky {
    @apply bg-sky-50 dark:bg-sky-950/30 border-sky-200 dark:border-sky-800;
  }

  .callout-amber {
    @apply bg-amber-50 dark:bg-amber-950/30 border-amber-200 dark:border-amber-800;
  }

  .callout-emerald {
    @apply bg-emerald-50 dark:bg-emerald-950/30 border-emerald-200 dark:border-emerald-800;
  }

  .callout-rose {
    @apply bg-rose-50 dark:bg-rose-950/30 border-rose-200 dark:border-rose-800;
  }

  .callout-compact {
    @apply p-4;
  }

  /* ===============================================
     PRICE CHIPS
     =============================================== */
  .price-chip {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-mono font-medium;
    @apply bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300;
  }

  /* ===============================================
     STEP CARDS (for numbered steps)
     =============================================== */
  .step-card {
    @apply relative pl-12 py-4;
  }

  .step-badge {
    @apply absolute left-0 top-4 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold;
    @apply bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-400;
  }

  /* ===============================================
     INFO CARDS
     =============================================== */
  .info-card {
    @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-5;
  }

  .info-card-header {
    @apply flex items-center gap-3 mb-3;
  }

  .info-card-icon {
    @apply w-10 h-10 rounded-lg flex items-center justify-center;
    @apply bg-indigo-100 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-400;
  }

  .info-card-title {
    @apply text-base font-semibold text-slate-900 dark:text-white;
  }

  /* ===============================================
     TABLES ENHANCEMENT
     =============================================== */
  .guide-article table {
    @apply w-full mb-8 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700;
  }

  .guide-article thead {
    @apply bg-slate-50 dark:bg-slate-800/50;
  }

  .guide-article th {
    @apply text-left px-4 py-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider;
  }

  .guide-article td {
    @apply px-4 py-3 text-sm border-t border-slate-100 dark:border-slate-700/50;
  }

  .guide-article tbody tr {
    @apply bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors;
  }

  /* ===============================================
     STATUS BADGES
     =============================================== */
  .status-high {
    @apply text-emerald-600 dark:text-emerald-400 font-medium;
  }

  .status-medium {
    @apply text-amber-600 dark:text-amber-400 font-medium;
  }

  .status-low {
    @apply text-rose-600 dark:text-rose-400 font-medium;
  }

  /* ===============================================
     LEAFLET MAP POPUP OVERRIDES
     Ensures popup is always visible, high contrast,
     and consistent with the design system.
     =============================================== */

  /* Popup container styling */
  .leaflet-popup-content-wrapper {
    @apply bg-white rounded-xl shadow-lg border border-slate-200;
    padding: 0;
    overflow: hidden;
  }

  .leaflet-popup-content {
    margin: 12px 14px;
    line-height: 1.4;
    font-size: 13px;
    color: #0f172a; /* slate-900 */
  }

  /* Popup tip (arrow) styling */
  .leaflet-popup-tip-container {
    margin-top: -1px;
  }

  .leaflet-popup-tip {
    @apply bg-white border border-slate-200;
    box-shadow: none;
  }

  /* Close button styling */
  .leaflet-popup-close-button {
    color: #64748b !important; /* slate-500 */
    font-size: 20px !important;
    font-weight: 400 !important;
    width: 28px !important;
    height: 28px !important;
    top: 6px !important;
    right: 6px !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition: background-color 0.15s ease, color 0.15s ease;
  }

  .leaflet-popup-close-button:hover {
    color: #0f172a !important; /* slate-900 */
    background-color: #f1f5f9 !important; /* slate-100 */
  }

  /* Ensure popup links have clear hover states */
  .store-popup-link {
    text-decoration: none;
    transition: color 0.15s ease, text-decoration 0.15s ease;
  }

  .store-popup-link:hover {
    text-decoration: underline;
  }

  /* Prevent popup from hugging edges - add margin to popup pane */
  .leaflet-popup {
    margin-bottom: 10px;
  }
}
