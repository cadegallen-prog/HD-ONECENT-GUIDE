@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* ===============================================
       PENNY CENTRAL – SLATE STEEL DESIGN SYSTEM
       Clean, authoritative, professional aesthetic
       =============================================== */

    /* Backgrounds - Light Mode */
    --bg-page: #f8fafc; /* slate-50 - softer than pure white */
    --bg-card: #ffffff;
    --bg-elevated: #f1f5f9; /* slate-100 */

    /* Backgrounds - Dark Mode */
    --bg-page-dark: #0f172a; /* slate-900 */
    --bg-card-dark: #1e293b; /* slate-800 */
    --bg-elevated-dark: #334155; /* slate-700 */

    /* Text - Light Mode */
    --text-primary: #0f172a; /* slate-900 */
    --text-secondary: #334155; /* slate-700 */
    --text-muted: #64748b; /* slate-500 */

    /* Text - Dark Mode */
    --text-primary-dark: #f1f5f9; /* slate-100 */
    --text-secondary-dark: #cbd5e1; /* slate-300 */
    --text-muted-dark: #94a3b8; /* slate-400 */

    /* Borders */
    --border-light: #e2e8f0; /* slate-200 */
    --border-dark: #334155; /* slate-700 */

    /* Accent — SLATE STEEL — Professional authority */
    --accent: #475569; /* slate-600 - main accent */
    --accent-hover: #334155; /* slate-700 - darker on hover */
    --accent-muted: #f1f5f9; /* slate-100 - subtle background */
    --accent-emphasis: #1e293b; /* slate-800 - strong emphasis */

    /* Shadow for cards */
    --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);

    /* Status colors - functional only */
    --success: #16a34a;
    --error: #dc2626;
    --warning: #d97706;

    /* shadcn/ui compatibility */
    --background: var(--bg-page);
    --foreground: var(--text-primary);
    --card: var(--bg-card);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-card);
    --popover-foreground: var(--text-primary);
    --primary: var(--accent);
    --primary-foreground: #ffffff;
    --secondary: var(--bg-elevated);
    --secondary-foreground: var(--text-primary);
    --muted: var(--bg-elevated);
    --muted-foreground: var(--text-muted);
    --accent-foreground: #ffffff;
    --destructive: var(--error);
    --destructive-foreground: #ffffff;
    --border: var(--border-light);
    --input: var(--border-light);
    --ring: var(--accent);
    --radius: 0.5rem;
  }

  .dark {
    --bg-page: var(--bg-page-dark);
    --bg-card: var(--bg-card-dark);
    --bg-elevated: var(--bg-elevated-dark);
    --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark);
    --text-muted: var(--text-muted-dark);
    --border: var(--border-dark);

    /* Dark mode accents - slightly lighter for visibility */
    --accent: #94a3b8; /* slate-400 */
    --accent-hover: #cbd5e1; /* slate-300 */
    --accent-muted: rgba(148, 163, 184, 0.15);
    --accent-emphasis: #f1f5f9; /* slate-100 */

    --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.3);

    /* shadcn/ui compatibility - dark */
    --background: var(--bg-page-dark);
    --foreground: var(--text-primary-dark);
    --card: var(--bg-card-dark);
    --card-foreground: var(--text-primary-dark);
    --popover: var(--bg-card-dark);
    --popover-foreground: var(--text-primary-dark);
    --secondary: var(--bg-elevated-dark);
    --secondary-foreground: var(--text-primary-dark);
    --muted: var(--bg-elevated-dark);
    --muted-foreground: var(--text-muted-dark);
    --border: var(--border-dark);
    --input: var(--border-dark);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family:
      "Inter",
      -apple-system,
      BlinkMacSystemFont,
      sans-serif;
    font-size: 15px;
    line-height: 1.5;
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
  }

  /* Typography - Use Tailwind utilities instead of global styles */
  /* Page titles: text-[22px] font-semibold text-text-primary */
  /* Section headings: text-base font-semibold text-text-primary */
  /* Card titles: text-sm font-semibold text-text-primary */
  /* Body text: text-sm text-text-primary */

  code,
  .sku,
  .code {
    font-family: ui-monospace, monospace;
    font-size: 14px;
  }

  .caption,
  figcaption {
    font-size: 12px;
    color: var(--text-muted);
  }
}

@layer components {
  /* ===============================================
     GUIDE ARTICLE STYLES
     =============================================== */
  .guide-article {
    @apply text-slate-700 dark:text-slate-300;
  }

  .guide-article p {
    @apply mb-4 leading-relaxed;
  }

  .guide-article ul {
    @apply mb-6 ml-6 space-y-2 list-disc;
  }

  .guide-article li {
    @apply leading-relaxed;
  }

  .guide-article strong {
    @apply text-slate-900 dark:text-white font-semibold;
  }

  /* Section Headings */
  .section-heading {
    @apply text-xl font-semibold text-slate-900 dark:text-white mb-6 pb-3 border-b border-slate-200 dark:border-slate-700;
  }

  .lead {
    @apply text-lg text-slate-600 dark:text-slate-400 mb-6;
  }

  /* ===============================================
     CALLOUT BOXES
     =============================================== */
  .callout {
    @apply rounded-xl p-5 mb-6 border;
  }

  .callout-sky {
    @apply bg-sky-50 dark:bg-sky-950/30 border-sky-200 dark:border-sky-800;
  }

  .callout-amber {
    @apply bg-amber-50 dark:bg-amber-950/30 border-amber-200 dark:border-amber-800;
  }

  .callout-emerald {
    @apply bg-emerald-50 dark:bg-emerald-950/30 border-emerald-200 dark:border-emerald-800;
  }

  .callout-rose {
    @apply bg-rose-50 dark:bg-rose-950/30 border-rose-200 dark:border-rose-800;
  }

  .callout-compact {
    @apply p-4;
  }

  /* ===============================================
     PRICE CHIPS
     =============================================== */
  .price-chip {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-mono font-medium;
    @apply bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300;
  }

  /* ===============================================
     STEP CARDS (for numbered steps)
     =============================================== */
  .step-card {
    @apply relative pl-10 py-3;
  }

  .step-badge {
    @apply absolute left-0 top-3 w-7 h-7 rounded flex items-center justify-center text-xs font-bold;
    @apply bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300;
  }

  /* ===============================================
     INFO CARDS
     =============================================== */
  .info-card {
    @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4;
  }

  .info-card-header {
    @apply flex items-center gap-2.5 mb-2;
  }

  .info-card-icon {
    @apply w-8 h-8 rounded flex items-center justify-center;
    @apply bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400;
  }

  .info-card-title {
    @apply text-sm font-semibold text-slate-900 dark:text-white;
  }

  /* ===============================================
     TABLES ENHANCEMENT
     =============================================== */
  .guide-article table {
    @apply w-full mb-8 rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700;
  }

  .guide-article thead {
    @apply bg-slate-50 dark:bg-slate-800/50;
  }

  .guide-article th {
    @apply text-left px-4 py-3 text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider;
  }

  .guide-article td {
    @apply px-4 py-3 text-sm border-t border-slate-100 dark:border-slate-700/50;
  }

  .guide-article tbody tr {
    @apply bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors;
  }

  /* ===============================================
     STATUS BADGES
     =============================================== */
  .status-high {
    @apply text-emerald-600 dark:text-emerald-400 font-medium;
  }

  .status-medium {
    @apply text-amber-600 dark:text-amber-400 font-medium;
  }

  .status-low {
    @apply text-rose-600 dark:text-rose-400 font-medium;
  }

  /* ===============================================
     LEAFLET MAP POPUP OVERRIDES
     Ensures popup is always visible, high contrast,
     and consistent with the design system.
     =============================================== */

  /* Popup container styling - Light mode */
  .leaflet-popup-content-wrapper {
    @apply bg-white rounded-xl shadow-lg border border-slate-200;
    padding: 0;
    overflow: hidden;
  }

  .leaflet-popup-content {
    margin: 14px 16px;
    line-height: 1.5;
    font-size: 13px;
    color: #0f172a; /* slate-900 */
  }

  /* Popup tip (arrow) styling - Light mode */
  .leaflet-popup-tip-container {
    margin-top: -1px;
  }

  .leaflet-popup-tip {
    @apply bg-white border border-slate-200;
    box-shadow: none;
  }

  /* Close button styling - Light mode */
  .leaflet-popup-close-button {
    color: #64748b !important; /* slate-500 */
    font-size: 20px !important;
    font-weight: 400 !important;
    width: 28px !important;
    height: 28px !important;
    top: 8px !important;
    right: 8px !important;
    padding: 0 !important;
    display: flex !important;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition:
      background-color 0.15s ease,
      color 0.15s ease;
  }

  .leaflet-popup-close-button:hover {
    color: #0f172a !important; /* slate-900 */
    background-color: #f1f5f9 !important; /* slate-100 */
  }

  /* ===============================================
     DARK MODE POPUP OVERRIDES
     =============================================== */
  .dark .leaflet-popup-content-wrapper {
    @apply bg-slate-800 border-slate-700;
  }

  .dark .leaflet-popup-content {
    color: #f8fafc; /* slate-50 */
  }

  .dark .leaflet-popup-tip {
    @apply bg-slate-800 border-slate-700;
  }

  .dark .leaflet-popup-close-button {
    color: #94a3b8 !important; /* slate-400 */
  }

  .dark .leaflet-popup-close-button:hover {
    color: #f8fafc !important; /* slate-50 */
    background-color: #334155 !important; /* slate-700 */
  }

  /* Ensure popup links have clear hover states */
  .store-popup-link {
    text-decoration: none;
    transition:
      color 0.15s ease,
      text-decoration 0.15s ease;
  }

  .store-popup-link:hover {
    text-decoration: underline;
  }

  /* Prevent popup from hugging edges - add margin to popup pane */
  .leaflet-popup {
    margin-bottom: 10px;
  }
}
